// Core colors

$color-orange:                hsl(20, 100, 46);
$color-bg:                    #fff;
$color-fg:                    #000;
$color-shadow:                #000;
$color-blue:                  hsl(211, 87, 41);
$color-mark:                  hsl(60, 100, 90);

$color-darkmode-orange:       hsl(8, 90, 60);
$color-darkmode-bg:           hsl(210, 15, 18);
$color-darkmode-fg:           #fff;
$color-darkmode-shadow:       #000;
$color-darkmode-blue:         hsl(211, 87, 65);
$color-darkmode-mark:         hsl(0, 0, 0);

// Derived colors

$color-blue-hint:             mix($color-blue, $color-bg, 8%);
$color-orange-quiet:          mix($color-orange, $color-bg, 10%);
$color-bg-push:               mix($color-fg, $color-bg, 5%);
$color-bg-pull:               mix($color-orange, $color-bg, 10%); // exception
$color-blue-quiet:            desaturate(mix($color-blue, $color-bg, 15%), 10%);
$color-blue-desat:            mix(desaturate($color-blue, 60%), $color-bg, 85%);
$color-fg-40:                 mix($color-fg, $color-bg-push, 15%);
$color-fg-60:                 mix($color-fg, $color-bg-push, 40%);
$color-fg-80:                 mix($color-fg, $color-bg-push, 70%);
$color-fg-95:                 mix($color-fg, $color-bg-push, 95%);
$color-nav-shadow:            rgba(0, 0, 0, 0.2);

$color-darkmode-blue-hint:    desaturate(mix($color-darkmode-blue, $color-darkmode-bg, 8%), 5%);
$color-darkmode-orange-quiet: mix($color-darkmode-orange, $color-darkmode-bg, 10%);
$color-darkmode-bg-push:      saturate(mix($color-darkmode-fg, $color-darkmode-bg, 5%), 5%);
$color-darkmode-bg-pull:      mix($color-darkmode-bg, $color-darkmode-shadow, 50%); // exception
$color-darkmode-blue-quiet:   desaturate(mix($color-darkmode-blue, $color-darkmode-bg, 15%), 10%);
$color-darkmode-blue-desat:   mix(desaturate($color-darkmode-blue, 60%), $color-darkmode-bg, 85%);
$color-darkmode-fg-40:        mix($color-darkmode-fg, $color-darkmode-bg-push, 15%);
$color-darkmode-fg-60:        mix($color-darkmode-fg, $color-darkmode-bg-push, 40%);
$color-darkmode-fg-80:        mix($color-darkmode-fg, $color-darkmode-bg-push, 70%);
$color-darkmode-fg-95:        mix($color-darkmode-fg, $color-darkmode-bg-push, 95%);
$color-darkmode-nav-shadow:   rgba(0, 0, 0, 0.4);

// Swatches

.swatch-orange {
  background: $color-orange;
  @at-root .dark & {
    background: $color-darkmode-orange;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-orange;
  }
}

.swatch-bg {
  background: $color-bg;
  @at-root .dark & {
    background: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg;
  }
}

.swatch-fg {
  background: $color-fg;
  @at-root .dark & {
    background: $color-darkmode-fg;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-fg;
  }
}

.swatch-shadow {
  background: $color-shadow;
  @at-root .dark & {
    background: $color-darkmode-shadow;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-shadow;
  }
}

.swatch-blue {
  background: $color-blue;
  @at-root .dark & {
    background: $color-darkmode-blue;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-blue;
  }
}

.swatch-mark {
  background: $color-mark;
  @at-root .dark & {
    background: $color-darkmode-mark;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-mark;
  }
}

.swatch-bg-push {
  background: $color-bg-push;
  @at-root .dark & {
    background: $color-darkmode-bg-push;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg-push;
  }
}

.swatch-bg-pull {
  background: $color-bg-pull;
  @at-root .dark & {
    background: $color-darkmode-bg-pull;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg-pull;
  }
}

.swatch-orange-quiet {
  background: $color-orange-quiet;
  @at-root .dark & {
    background: $color-darkmode-orange-quiet;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-orange-quiet;
  }
}

.swatch-blue-quiet {
  background: $color-blue-quiet;
  @at-root .dark & {
    background: $color-darkmode-blue-quiet;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-blue-quiet;
  }
}

.swatch-blue-desat {
  background: $color-blue-desat;
  @at-root .dark & {
    background: $color-darkmode-blue-desat;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-blue-desat;
  }
}

.swatch-fg-40 {
  background: $color-fg-40;
  @at-root .dark & {
    background: $color-darkmode-fg-40;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-fg-40;
  }
}

.swatch-fg-60 {
  background: $color-fg-60;
  @at-root .dark & {
    background: $color-darkmode-fg-60;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-fg-60;
  }
}

.swatch-fg-80 {
  background: $color-fg-80;
  @at-root .dark & {
    background: $color-darkmode-fg-80;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-fg-80;
  }
}

.swatch-fg-95 {
  background: $color-fg-95;
  @at-root .dark & {
    background: $color-darkmode-fg-95;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-fg-95;
  }
}

// Body

@mixin page-bg-color {
  background: $color-blue-hint;
  @at-root.dark {
    // Special: this applies to the element itself
    background: $color-darkmode-blue-hint;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-blue-hint;
  }
}

@mixin page-top-border-color {
  border-color: $color-orange;
  @at-root .dark & {
    border-color: $color-darkmode-orange;
  }
  @media (prefers-color-scheme: dark) {
    border-color: $color-darkmode-orange;
  }
}

.article-content {
  background: $color-bg;
  @at-root .dark & {
    background: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg;
  }
}

// Text

@mixin text-color {
  color: $color-fg-80;
  @at-root .dark & {
    color: $color-darkmode-fg-80;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg-80;
  }
}

@mixin text-emph-color {
  color: $color-fg;
  @at-root .dark & {
    color: $color-darkmode-fg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg;
  }
}

// Navigation

@mixin nav-bg-color {
  background: $color-bg;
  @at-root .dark & {
    background: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg;
  }
}

@mixin nav-shadow-color {
  box-shadow: 0 3px 5px $color-nav-shadow;
  @at-root .dark & {
    box-shadow: 0 3px 5px $color-darkmode-nav-shadow;
  }
  @media (prefers-color-scheme: dark) {
    box-shadow: 0 3px 5px $color-darkmode-nav-shadow;
  }
}

@mixin nav-item-active-color {
  color: $color-fg;
  @at-root .dark & {
    color: $color-darkmode-fg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg;
  }
}

@mixin nav-item-hover-color {
  color: $color-fg;
  @at-root .dark & {
    color: $color-darkmode-fg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg;
  }
}

@mixin nav-link-color {
  color: $color-fg-60;
  @at-root .dark & {
    color: $color-darkmode-fg-60;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg-60;
  }
}

@mixin nav-border-color {
  border-color: $color-orange;
  @at-root .dark & {
    border-color: $color-darkmode-orange;
  }
  @media (prefers-color-scheme: dark) {
    border-color: $color-darkmode-orange;
  }
}

// Explanation

@mixin explanation-bg-color {
  background: $color-bg;
  @at-root .dark & {
    background: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg;
  }
}

@mixin explanation-fg-color {
  color: $color-orange;
  @at-root .dark & {
    color: $color-darkmode-orange;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-orange;
  }
}

// Admonitions

@mixin admon-bg-color {
  background: $color-bg-push;
  @at-root .dark & {
    background: $color-darkmode-bg-push;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg-push;
  }
}

@mixin admon-fg-tip-color {
  color: $color-blue;
  @at-root .dark & {
    color: $color-darkmode-blue;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-blue;
  }
}

@mixin admon-fg-note-color {
  color: $color-blue;
  @at-root .dark & {
    color: $color-darkmode-blue;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-blue;
  }
}

@mixin admon-fg-caution-color {
  color: $color-orange;
  @at-root .dark & {
    color: $color-darkmode-orange;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-orange;
  }
}

@mixin admon-fg-todo-color {
  color: $color-fg-60;
  @at-root .dark & {
    color: $color-darkmode-fg-60;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg-60;
  }
}

@mixin admon-bg-tip-color {
  background: $color-blue-quiet;
  @at-root .dark & {
    background: $color-darkmode-blue-quiet;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-blue-quiet;
  }
}

@mixin admon-bg-note-color {
  background: $color-blue-quiet;
  @at-root .dark & {
    background: $color-darkmode-blue-quiet;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-blue-quiet;
  }
}

@mixin admon-bg-caution-color {
  background: $color-orange-quiet;
  @at-root .dark & {
    background: $color-darkmode-orange-quiet;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-orange-quiet;
  }
}

@mixin admon-bg-todo-color {
  background: $color-bg-push;
  @at-root .dark & {
    background: $color-darkmode-bg-push;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg-push;
  }
}

// Footer

@mixin footer-bg-color {
  background: $color-bg;
  @at-root .dark & {
    background: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg;
  }
}

@mixin footer-fg-color {
  color: $color-fg-60;
  @at-root .dark & {
    color: $color-darkmode-fg-60;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg-60;
  }
}

@mixin footer-link-color {
  color: $color-fg-95;
  @at-root .dark & {
    color: $color-darkmode-fg-95;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg-95;
  }
}

@mixin footer-link-hover-bg-color {
  background: $color-fg-95;
  @at-root .dark & {
    background: $color-darkmode-fg-95;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-fg-95;
  }
}

@mixin footer-link-hover-fg-color {
  color: $color-bg;
  @at-root .dark & {
    color: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-bg;
  }
}

@mixin footer-heart-color {
  color: $color-orange;
  @at-root .dark & {
    color: $color-darkmode-orange;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-orange;
  }
}

// Links

@mixin link-color {
  color: $color-blue;
  @at-root .dark & {
    color: $color-darkmode-blue;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-blue;
  }
}

@mixin link-hover-fg-color {
  color: $color-bg;
  @at-root .dark & {
    color: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-bg;
  }
}

@mixin link-hover-bg-color {
  background: $color-blue;
  @at-root .dark & {
    background: $color-darkmode-blue;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-blue;
  }
}

// Code

@mixin pre-bg-color {
  background: $color-bg-push;
  @at-root .dark & {
    background: $color-darkmode-bg-push;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg-push;
  }
}

@mixin code-prompt-color {
  color: transparentize($color-fg, 0.5);
  @at-root .dark & {
    color: transparentize($color-darkmode-fg, 0.5);
  }
  @media (prefers-color-scheme: dark) {
    color: transparentize($color-darkmode-fg, 0.5);
  }
}

@mixin pre-box-shadow {
  box-shadow: 0 1px 1px transparentize($color-shadow, 0.7);
  @at-root .dark & {
    box-shadow: 0 1px 1px transparentize($color-darkmode-shadow, 0.7);
  }
  @media (prefers-color-scheme: dark) {
    box-shadow: 0 1px 1px transparentize($color-darkmode-shadow, 0.7);
  }
}

// Hero

@mixin hero-bg-color {
  background: $color-blue-quiet url(/assets/images/symphony.png);
  @at-root .dark & {
    background: $color-darkmode-blue-quiet url(/assets/images/symphony-dark.png);
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-blue-quiet url(/assets/images/symphony-dark.png);
  }
}

@mixin hero-link-bg-color {
  background: transparentize($color-bg, 0.6);
  @at-root .dark & {
    background: transparentize($color-darkmode-bg, 0.6);
  }
  @media (prefers-color-scheme: dark) {
    background: transparentize($color-darkmode-bg, 0.6);
  }
}

@mixin hero-link-hover-fg-color {
  color: $color-blue;
  @at-root .dark & {
    color: $color-darkmode-blue;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-blue;
  }
}

@mixin hero-link-hover-bg-color {
  background: $color-bg;
  @at-root .dark & {
    background: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg;
  }
}

// Search

@mixin search-bg-color {
  background: $color-bg;
  @at-root .dark & {
    background: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg;
  }
}

@mixin search-fg-color {
  color: $color-fg-60;
  @at-root .dark & {
    color: $color-darkmode-fg-60;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg-60;
  }
}

@mixin search-border-color {
  border-color: $color-blue-quiet;
  @at-root .dark & {
    border-color: $color-darkmode-blue-quiet;
  }
  @media (prefers-color-scheme: dark) {
    border-color: $color-darkmode-blue-quiet;
  }
}

@mixin search-placeholder-bg-color {
  background: $color-bg;
  @at-root .dark & {
    background: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg;
  }
}

@mixin search-placeholder-border-color {
  border-color: $color-bg;
  @at-root .dark & {
    border-color:  $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    border-color:  $color-darkmode-bg;
  }
}

@mixin search-results-l0-fg-color {
  color: $color-orange;
}

@mixin search-results-l1-fg-color {
  color: $color-fg;
}

@mixin search-results-higlight-fg-color {
  color: $color-orange;
}

@mixin search-results-higlight-bg-color {
  background: $color-orange-quiet;
}

@mixin search-results-selection-bg-color {
  background: $color-orange-quiet;
}

// Mark

@mixin mark-fg-color {
  color: $color-fg;
  @at-root .dark & {
    color: $color-darkmode-fg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg;
  }
}

@mixin mark-bg-color {
  background: $color-mark;
  @at-root .dark & {
    background: $color-darkmode-mark;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-mark;
  }
}

// Tags

@mixin tag-legacy-bg-color {
  background: $color-fg-60;
  @at-root .dark & {
    background: $color-darkmode-fg-60;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-fg-60;
  }
}

@mixin tag-legacy-fg-color {
  color: $color-bg;
  @at-root .dark & {
    color: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-bg;
  }
}

@mixin tag-legacy-intermediate-bg-color {
  background: $color-blue-desat;
  @at-root .dark & {
    background: $color-darkmode-blue-desat;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-blue-desat;
  }
}

@mixin tag-legacy-intermediate-fg-color {
  color: $color-bg;
  @at-root .dark & {
    color: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-bg;
  }
}

@mixin tag-new-bg-color {
  background: $color-blue;
  @at-root .dark & {
    background: $color-darkmode-blue;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-blue;
  }
}

@mixin tag-new-fg-color {
  color: $color-bg;
  @at-root .dark & {
    color: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-bg;
  }
}

@mixin tag-errors-bg-color {
  background: $color-orange;
  @at-root .dark & {
    background: $color-darkmode-orange;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-orange;
  }
}

@mixin tag-errors-fg-color {
  color: $color-bg;
  @at-root .dark & {
    color: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-bg;
  }
}

// Figures

@mixin figure-bg-color {
  background: $color-bg;
  @at-root .dark & {
    background: $color-darkmode-bg;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg;
  }
}

@mixin figure-border-color {
  border-color: $color-bg-push;
  @at-root .dark & {
    border-color: $color-darkmode-bg-push;
  }
  @media (prefers-color-scheme: dark) {
    border-color: $color-darkmode-bg-push;
  }
}

@mixin figure-caption-bg-color {
  background: $color-bg-push;
  @at-root .dark & {
    background: $color-darkmode-bg-push;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg-push;
  }
}

// Sidebar

@mixin sidebar-bg-color {
  background: $color-bg-push;
  @at-root .dark & {
    background: $color-darkmode-bg-push;
  }
  @media (prefers-color-scheme: dark) {
    background: $color-darkmode-bg-push;
  }
}

@mixin sidebar-section-title-color {
  color: $color-orange;
  @at-root .dark & {
    color: $color-darkmode-orange;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-orange;
  }
}

// Typography

@mixin header-color {
  color: $color-orange;
  @at-root .dark & {
    color: $color-darkmode-orange;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-orange;
  }
}

@mixin dt-color {
  color: $color-fg;
  @at-root .dark & {
    color: $color-darkmode-fg;
  }
  @media (prefers-color-scheme: dark) {
    color: $color-darkmode-fg;
  }
}
