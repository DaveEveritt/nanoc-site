<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../custom.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Class: Nanoc3::Site</title>
  </head>
  <body>
    <div id="content">
      <div class="section class Nanoc3_Site">
  <h1 class="title">Class: Nanoc3::Site</h1>
  <div class="section docstring">
  <p>
A Nanoc3::Site is the in-memory representation of a nanoc site. It holds
references to the following site data:
</p>
<ul>
<li><tt>items</tt> is a list of Nanoc3::Item instances representing items

</li>
<li><tt>layouts</tt> is a list of Nanoc3::Layout instances representing layouts

</li>
<li><tt>code_snippets</tt> is list of Nanoc3::CodeSnippet instance representing
custom site code

</li>
</ul>
<p>
In addition, each site has a <tt>config</tt> hash which stores the site
configuration. This configuration hash can have the following keys:
</p>
<table>
<tr><td valign="top"><tt>output_dir</tt>:</td><td>The directory to which compiled items will be written. This path is
relative to the current working directory, but can also be an absolute
path.

</td></tr>
<tr><td valign="top"><tt>data_sources</tt>:</td><td>A list of data sources for this site. See below for documentation on the
structure of this list. By default, there is only one data source of the
filesystem type mounted at /.

</td></tr>
<tr><td valign="top"><tt>index_filenames</tt>:</td><td>A list of filenames that will be stripped off full item paths to create
cleaner URLs (for example, &#8217;/about/&#8217; will be used instead of
&#8217;/about/index.html&#8217;). The default value should be okay in most
cases.

</td></tr>
</table>
<p>
The list of data sources consists of hashes with the following keys:
</p>
<table>
<tr><td valign="top"><tt>:type</tt>:</td><td>The type of data source, i.e. its identifier.

</td></tr>
<tr><td valign="top"><tt>:items_root</tt>:</td><td>The prefix that should be given to all items returned by the #items method
(comparable to mount points for filesystems in Unix-ish OSes).

</td></tr>
<tr><td valign="top"><tt>:layouts_root</tt>:</td><td>The prefix that should be given to all layouts returned by the #layouts
method (comparable to mount points for filesystems in Unix-ish OSes).

</td></tr>
<tr><td valign="top"><tt>:config</tt>:</td><td>A hash containing the configuration for this data source. This

</td></tr>
</table>
<pre class="code">
           <span class='is identifier id'>is</span> <span class='especially identifier id'>especially</span> <span class='useful identifier id'>useful</span> <span class='for for kw'>for</span> <span class='online identifier id'>online</span> <span class='data identifier id'>data</span> <span class='sources identifier id'>sources</span><span class='semicolon token'>;</span> <span class='for for kw'>for</span> <span class='example identifier id'>example</span><span class='comma token'>,</span> <span class='a identifier id'>a</span>
           <span class='Twitter constant id'>Twitter</span> <span class='data identifier id'>data</span> <span class='source identifier id'>source</span> <span class='would identifier id'>would</span> <span class='need identifier id'>need</span> <span class='the identifier id'>the</span> <span class='username identifier id'>username</span> <span class='of identifier id'>of</span> <span class='the identifier id'>the</span> <span class='account identifier id'>account</span> <span class='from identifier id'>from</span>
           <span class='which identifier id'>which</span> <span class='to identifier id'>to</span> <span class='fetch identifier id'>fetch</span> <span class='tweets identifier id'>tweets</span><span class='dot token'>.</span>
</pre>
<p>
A site also has several helper classes:
</p>
<ul>
<li><tt>data_source</tt> is a Nanoc3::DataSource subclass instance used for
loading site data.

</li>
<li><tt>compiler</tt> is a Nanoc3::Compiler instance that compiles item
representations.

</li>
</ul>
<p>
The physical representation of a Nanoc3::Site is usually a directory that
contains a configuration file, site data, a rakefile, a rules file, etc.
The way site data is stored depends on the data source.
</p>

</div><div class="section attributes">
  <h1>Attributes</h1>

  
    <div class="instance">
      <h2>Instance Attributes</h2>
      <table>
      
        
        <tr class="">
          <th class='signature'>
            <span class='name'>config_mtime</span>
          </td>
          <td class="readwrite">
            [<span id='config_mtime-instance_method'>R</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The timestamp when the site configuration was last modified.
</p>

            
          </td>
        </tr>
        
      
        
        <tr class="">
          <th class='signature'>
            <span class='name'>config</span>
          </td>
          <td class="readwrite">
            [<span id='config-instance_method'>R</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The site configuration.
</p>

            
          </td>
        </tr>
        
      
        
        <tr class="">
          <th class='signature'>
            <span class='name'>preprocessor</span>
          </td>
          <td class="readwrite">
            [<span id='preprocessor-instance_method'>R</span><span id='preprocessor=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The code block that will be executed after all data is loaded but before
the site is compiled.
</p>

            
          </td>
        </tr>
        
      
        
        <tr class="">
          <th class='signature'>
            <span class='name'>rules_mtime</span>
          </td>
          <td class="readwrite">
            [<span id='rules_mtime-instance_method'>R</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The timestamp when the rules were last modified.
</p>

            
          </td>
        </tr>
        
      
      </table>
    </div>
  
</div>
<div class="section constants">
  <div class="thisclass">
  <h1>Constants</h1>
  <dl>
    
      <dt id="DEFAULT_CONFIG-constant">DEFAULT_CONFIG</dt>
      <dd>{
  :output_dir      =&gt; 'output',
  :data_sources    =&gt; [ {} ],
  :index_filenames =&gt; [ 'index.html' ]
}</dd>
    
      <dt id="DEFAULT_DATA_SOURCE_CONFIG-constant">DEFAULT_DATA_SOURCE_CONFIG</dt>
      <dd>{
  :type         =&gt; 'filesystem_compact',
  :items_root   =&gt; '/',
  :layouts_root =&gt; '/',
  :config       =&gt; {}
}</dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h1>Constructor Summary</h1>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
    <div class='section methodsignature'>
    <tt class='def'>
      <span class='visibility'>public</span>
      <span class='return_types'></span>
      <span class='name'>initialize</span><span class='args'>(dir_or_config_hash)</span>
      <span class='block'></span>
    </tt>
  </div>

</div><div class="section docstring">
  <p>
Creates a Nanoc3::Site object for the site specified by the given
<tt>dir_or_config_hash</tt> argument.
</p>
<table>
<tr><td valign="top"><tt>dir_or_config_hash</tt>:</td><td>If a string, contains the path to the site directory; if a hash, contains
the site configuration.

</td></tr>
</table>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


98
99
100
101
102
103
104</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/nanoc3/base/site.rb', line 98</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='dir_or_config_hash identifier id'>dir_or_config_hash</span><span class='rparen token'>)</span>
  <span class='build_config identifier id'>build_config</span><span class='lparen token'>(</span><span class='dir_or_config_hash identifier id'>dir_or_config_hash</span><span class='rparen token'>)</span>

  <span class='@code_snippets_loaded ivar id'>@code_snippets_loaded</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='@items_loaded ivar id'>@items_loaded</span>         <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='@layouts_loaded ivar id'>@layouts_loaded</span>       <span class='assign token'>=</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        
          <span class='overload'>
            <span class='name'><a href="#code_snippets-instance_method" title="#code_snippets">#code_snippets</a></span><span class='args'></span>
            <span class='block'></span>
          </span>
        
        
      </th>
      <td class="docstring">
        <p>
Returns this site&#8217;s code snippets.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        
          <span class='overload'>
            <span class='name'><a href="#compiler-instance_method" title="#compiler">#compiler</a></span><span class='args'></span>
            <span class='block'></span>
          </span>
        
        
      </th>
      <td class="docstring">
        <p>
Returns the compiler for this site.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        
          <span class='overload'>
            <span class='name'><a href="#data_sources-instance_method" title="#data_sources">#data_sources</a></span><span class='args'></span>
            <span class='block'></span>
          </span>
        
        
      </th>
      <td class="docstring">
        <p>
Returns the data sources for this site.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        
          <span class='overload'>
            <span class='name'><a href="#items-instance_method" title="#items">#items</a></span><span class='args'></span>
            <span class='block'></span>
          </span>
        
        
      </th>
      <td class="docstring">
        <p>
Returns this site&#8217;s items.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        
          <span class='overload'>
            <span class='name'><a href="#layouts-instance_method" title="#layouts">#layouts</a></span><span class='args'></span>
            <span class='block'></span>
          </span>
        
        
      </th>
      <td class="docstring">
        <p>
Returns this site&#8217;s layouts.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        
          <span class='overload'>
            <span class='name'><a href="#load_data-instance_method" title="#load_data">#load_data</a></span><span class='args'>(force = false)</span>
            <span class='block'></span>
          </span>
        
        
      </th>
      <td class="docstring">
        <p>
Loads the site data.
</p>

        
      </td>
    </tr>
  
</table>

  </div>
<div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>code_snippets</h3>
</div><div id="code_snippets-instance_method" class="section method">
  <div class="details_title">
    <div class='section methodsignature'>
    <tt class='def'>
      <span class='visibility'>public</span>
      <span class='return_types'></span>
      <span class='name'>code_snippets</span><span class='args'></span>
      <span class='block'></span>
    </tt>
  </div>

</div><div class="section docstring">
  <p>
Returns this site&#8217;s code snippets. Raises an exception if data
hasn&#8217;t been loaded yet.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Errors/DataNotYetAvailable.html" title="Nanoc3::Errors::DataNotYetAvailable">Nanoc3::Errors::DataNotYetAvailable</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


165
166
167
168</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/nanoc3/base/site.rb', line 165</span>

<span class='def def kw'>def</span> <span class='code_snippets identifier id'>code_snippets</span>
  <span class='raise identifier id'>raise</span> <span class='Nanoc3 constant id'>Nanoc3</span><span class='colon2 op'>::</span><span class='Errors constant id'>Errors</span><span class='colon2 op'>::</span><span class='DataNotYetAvailable constant id'>DataNotYetAvailable</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'Code snippets'</span><span class='comma token'>,</span> <span class='false false kw'>false</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='@code_snippets_loaded ivar id'>@code_snippets_loaded</span>
  <span class='@code_snippets ivar id'>@code_snippets</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>compiler</h3>
</div><div id="compiler-instance_method" class="section method">
  <div class="details_title">
    <div class='section methodsignature'>
    <tt class='def'>
      <span class='visibility'>public</span>
      <span class='return_types'></span>
      <span class='name'>compiler</span><span class='args'></span>
      <span class='block'></span>
    </tt>
  </div>

</div><div class="section docstring">
  <p>
Returns the compiler for this site. Will create a new compiler if none
exists yet.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


108
109
110</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/nanoc3/base/site.rb', line 108</span>

<span class='def def kw'>def</span> <span class='compiler identifier id'>compiler</span>
  <span class='@compiler ivar id'>@compiler</span> <span class='opasgn op'>||=</span> <span class='Compiler constant id'>Compiler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>data_sources</h3>
</div><div id="data_sources-instance_method" class="section method">
  <div class="details_title">
    <div class='section methodsignature'>
    <tt class='def'>
      <span class='visibility'>public</span>
      <span class='return_types'></span>
      <span class='name'>data_sources</span><span class='args'></span>
      <span class='block'></span>
    </tt>
  </div>

</div><div class="section docstring">
  <p>
Returns the data sources for this site. Will create a new data source if
none exists yet. Raises Nanoc3::Errors::UnknownDataSource if the site
configuration specifies an unknown data source.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/nanoc3/base/site.rb', line 115</span>

<span class='def def kw'>def</span> <span class='data_sources identifier id'>data_sources</span>
  <span class='@data_sources ivar id'>@data_sources</span> <span class='opasgn op'>||=</span> <span class='begin begin kw'>begin</span>
    <span class='@config ivar id'>@config</span><span class='lbrack token'>[</span><span class='symbol val'>:data_sources</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='data_source_hash identifier id'>data_source_hash</span><span class='bitor op'>|</span>
      <span class='comment val'># Get data source class</span>
      <span class='data_source_class identifier id'>data_source_class</span> <span class='assign token'>=</span> <span class='Nanoc3 constant id'>Nanoc3</span><span class='colon2 op'>::</span><span class='DataSource constant id'>DataSource</span><span class='dot token'>.</span><span class='named identifier id'>named</span><span class='lparen token'>(</span><span class='data_source_hash identifier id'>data_source_hash</span><span class='lbrack token'>[</span><span class='symbol val'>:type</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='raise identifier id'>raise</span> <span class='Nanoc3 constant id'>Nanoc3</span><span class='colon2 op'>::</span><span class='Errors constant id'>Errors</span><span class='colon2 op'>::</span><span class='UnknownDataSource constant id'>UnknownDataSource</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='data_source_hash identifier id'>data_source_hash</span><span class='lbrack token'>[</span><span class='symbol val'>:type</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='data_source_class identifier id'>data_source_class</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>

      <span class='comment val'># Create data source</span>
      <span class='data_source_class identifier id'>data_source_class</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span>
        <span class='self self kw'>self</span><span class='comma token'>,</span>
        <span class='data_source_hash identifier id'>data_source_hash</span><span class='lbrack token'>[</span><span class='symbol val'>:items_root</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
        <span class='data_source_hash identifier id'>data_source_hash</span><span class='lbrack token'>[</span><span class='symbol val'>:layouts_root</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
        <span class='data_source_hash identifier id'>data_source_hash</span><span class='lbrack token'>[</span><span class='symbol val'>:config</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>items</h3>
</div><div id="items-instance_method" class="section method">
  <div class="details_title">
    <div class='section methodsignature'>
    <tt class='def'>
      <span class='visibility'>public</span>
      <span class='return_types'></span>
      <span class='name'>items</span><span class='args'></span>
      <span class='block'></span>
    </tt>
  </div>

</div><div class="section docstring">
  <p>
Returns this site&#8217;s items. Raises an exception if data hasn&#8217;t
been loaded yet.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Errors/DataNotYetAvailable.html" title="Nanoc3::Errors::DataNotYetAvailable">Nanoc3::Errors::DataNotYetAvailable</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


171
172
173
174</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/nanoc3/base/site.rb', line 171</span>

<span class='def def kw'>def</span> <span class='items identifier id'>items</span>
  <span class='raise identifier id'>raise</span> <span class='Nanoc3 constant id'>Nanoc3</span><span class='colon2 op'>::</span><span class='Errors constant id'>Errors</span><span class='colon2 op'>::</span><span class='DataNotYetAvailable constant id'>DataNotYetAvailable</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'Items'</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='@items_loaded ivar id'>@items_loaded</span>
  <span class='@items ivar id'>@items</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>layouts</h3>
</div><div id="layouts-instance_method" class="section method">
  <div class="details_title">
    <div class='section methodsignature'>
    <tt class='def'>
      <span class='visibility'>public</span>
      <span class='return_types'></span>
      <span class='name'>layouts</span><span class='args'></span>
      <span class='block'></span>
    </tt>
  </div>

</div><div class="section docstring">
  <p>
Returns this site&#8217;s layouts. Raises an exception if data hasn&#8217;t
been loaded yet.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Errors/DataNotYetAvailable.html" title="Nanoc3::Errors::DataNotYetAvailable">Nanoc3::Errors::DataNotYetAvailable</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


177
178
179
180</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/nanoc3/base/site.rb', line 177</span>

<span class='def def kw'>def</span> <span class='layouts identifier id'>layouts</span>
  <span class='raise identifier id'>raise</span> <span class='Nanoc3 constant id'>Nanoc3</span><span class='colon2 op'>::</span><span class='Errors constant id'>Errors</span><span class='colon2 op'>::</span><span class='DataNotYetAvailable constant id'>DataNotYetAvailable</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'Layouts'</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='@layouts_loaded ivar id'>@layouts_loaded</span>
  <span class='@layouts ivar id'>@layouts</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>load_data</h3>
</div><div id="load_data-instance_method" class="section method">
  <div class="details_title">
    <div class='section methodsignature'>
    <tt class='def'>
      <span class='visibility'>public</span>
      <span class='return_types'></span>
      <span class='name'>load_data</span><span class='args'>(force = false)</span>
      <span class='block'></span>
    </tt>
  </div>

</div><div class="section docstring">
  <p>
Loads the site data. This will query the Nanoc3::DataSource associated with
the site and fetch all site data. The site data is cached, so calling this
method will not have any effect the second time, unless <tt>force</tt> is
true.
</p>
<table>
<tr><td valign="top"><tt>force</tt>:</td><td>If true, will force load the site data even if it has been loaded before,
to circumvent caching issues.

</td></tr>
</table>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/nanoc3/base/site.rb', line 140</span>

<span class='def def kw'>def</span> <span class='load_data identifier id'>load_data</span><span class='lparen token'>(</span><span class='force identifier id'>force</span><span class='assign token'>=</span><span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='comment val'># Don't load data twice</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='instance_variable_defined? fid id'>instance_variable_defined?</span><span class='lparen token'>(</span><span class='symbol val'>:@data_loaded</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='@data_loaded ivar id'>@data_loaded</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='force identifier id'>force</span>

  <span class='comment val'># Load all data</span>
  <span class='data_sources identifier id'>data_sources</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='ds identifier id'>ds</span><span class='bitor op'>|</span> <span class='ds identifier id'>ds</span><span class='dot token'>.</span><span class='use identifier id'>use</span> <span class='rbrace token'>}</span>
  <span class='load_code_snippets identifier id'>load_code_snippets</span><span class='lparen token'>(</span><span class='force identifier id'>force</span><span class='rparen token'>)</span>
  <span class='load_rules identifier id'>load_rules</span>
  <span class='load_items identifier id'>load_items</span>
  <span class='load_layouts identifier id'>load_layouts</span>
  <span class='data_sources identifier id'>data_sources</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='ds identifier id'>ds</span><span class='bitor op'>|</span> <span class='ds identifier id'>ds</span><span class='dot token'>.</span><span class='unuse identifier id'>unuse</span> <span class='rbrace token'>}</span>

  <span class='comment val'># Preprocess</span>
  <span class='setup_child_parent_links identifier id'>setup_child_parent_links</span>
  <span class='Nanoc3 constant id'>Nanoc3</span><span class='colon2 op'>::</span><span class='PreprocessorContext constant id'>PreprocessorContext</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='preprocessor identifier id'>preprocessor</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='preprocessor identifier id'>preprocessor</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='link_everything_to_site identifier id'>link_everything_to_site</span>
  <span class='setup_child_parent_links identifier id'>setup_child_parent_links</span>
  <span class='build_reps identifier id'>build_reps</span>
  <span class='route_reps identifier id'>route_reps</span>

  <span class='comment val'># Done</span>
  <span class='@data_loaded ivar id'>@data_loaded</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
    <div id="yard_info">
  Generated on Sunday, August 09 2009 at 01:43:13 PM by 
  <abbr class="yard" title="Yay! A Ruby Documentation Tool"><a href="http://yard.soen.ca">YARD</a></abbr> 
  0.2.3.2 (ruby-1.8.7).
</div>

  </body>
</html>