<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Nanoc3::DataSource
  
    &mdash; Documentation by YARD 0.7.5
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


    <link rel="canonical" href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/DataSource.html"/>
  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Nanoc3.html" title="Nanoc3 (module)">Nanoc3</a></span></span>
     &raquo; 
    <span class="title">DataSource</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
      <div style="margin: 30px 0; padding: 10px; border: 2px solid red; background: #fee"><strong>WARNING:</strong> This documentation applies to nanoc 3.1, which is not the latest version. Please consult the <a href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/DataSource.html">up-to-date API documentation</a> instead.</div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Nanoc3::DataSource
  <span class="abstract note title">Abstract</span>
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Nanoc3::DataSource</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extended by:</dt>
      <dd class="r2"><span class='object_link'><a href="PluginRegistry/PluginMethods.html" title="Nanoc3::PluginRegistry::PluginMethods (module)">PluginRegistry::PluginMethods</a></span></dd>
      
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/nanoc3/base/data_source.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This class is abstract.</strong> 
  <div class='inline'><p>Subclasses should at least implement <span class='object_link'><a href="#items-instance_method" title="Nanoc3::DataSource#items (method)">#items</a></span> and <span class='object_link'><a href="#layouts-instance_method" title="Nanoc3::DataSource#layouts (method)">#layouts</a></span>. If</p>
</div>
</div>
<p>Responsible for loading site data. It is the (abstract) superclass for all
data sources. Subclasses must at least implement the data reading methods
(<span class='object_link'><a href="#items-instance_method" title="Nanoc3::DataSource#items (method)">#items</a></span> and <span class='object_link'><a href="#layouts-instance_method" title="Nanoc3::DataSource#layouts (method)">#layouts</a></span>); all other methods involving data manipulation
are optional.</p>

<p>Apart from the methods for loading and storing data, there are the <span class='object_link'><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></span>
and <span class='object_link'><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></span> methods for bringing up and tearing down the connection to the
data source. These should be overridden in subclasses. The <span class='object_link'><a href="#loading-instance_method" title="Nanoc3::DataSource#loading (method)">#loading</a></span>
method wraps <span class='object_link'><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></span> and <span class='object_link'><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></span>. <span class='object_link'><a href="#loading-instance_method" title="Nanoc3::DataSource#loading (method)">#loading</a></span> is a convenience method for the
more low-level methods <span class='object_link'><a href="#use-instance_method" title="Nanoc3::DataSource#use (method)">#use</a></span> and <span class='object_link'><a href="#unuse-instance_method" title="Nanoc3::DataSource#unuse (method)">#unuse</a></span>, which respectively increment
and decrement the reference count; when the reference count goes from 0 to
1, the data source will be loaded (<span class='object_link'><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></span> will be called) and when the
reference count goes from 1 to 0, the data source will be unloaded
(<span class='object_link'><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></span> will be called).</p>

<p>The <span class='object_link'><a href="#setup-instance_method" title="Nanoc3::DataSource#setup (method)">#setup</a></span> method is used for setting up a site&#39;s data source for the
first time.</p>

<p>the data source should support creating items and layouts using the
<code>create_item</code> and <code>create_layout</code> CLI commands, the <span class='object_link'><a href="#setup-instance_method" title="Nanoc3::DataSource#setup (method)">#setup</a></span>,
#create&lt;em&gt;item and #create&lt;/em&gt;layout methods should be implemented as well.</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="DataSources/Delicious.html" title="Nanoc3::DataSources::Delicious (class)">Nanoc3::DataSources::Delicious</a></span>, <span class='object_link'><a href="DataSources/FilesystemUnified.html" title="Nanoc3::DataSources::FilesystemUnified (class)">Nanoc3::DataSources::FilesystemUnified</a></span>, <span class='object_link'><a href="DataSources/FilesystemVerbose.html" title="Nanoc3::DataSources::FilesystemVerbose (class)">Nanoc3::DataSources::FilesystemVerbose</a></span>, <span class='object_link'><a href="DataSources/LastFM.html" title="Nanoc3::DataSources::LastFM (class)">Nanoc3::DataSources::LastFM</a></span>, <span class='object_link'><a href="DataSources/Twitter.html" title="Nanoc3::DataSources::Twitter (class)">Nanoc3::DataSources::Twitter</a></span></p>
</div>




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">- (Hash) <strong>config</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>online data sources could contain authentication details.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#items_root-instance_method" title="#items_root (instance method)">- (String) <strong>items_root</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>should be mounted.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#layouts_root-instance_method" title="#layouts_root (instance method)">- (String) <strong>layouts_root</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>source should be mounted.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_item-instance_method" title="#create_item (instance method)">- (void) <strong>create_item</strong>(content, attributes, identifier, params = {}) </a>
    

    
  </span>
  
  
  
  <span class="abstract note title">Abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new item with the given content, attributes and identifier.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_layout-instance_method" title="#create_layout (instance method)">- (void) <strong>create_layout</strong>(content, attributes, identifier, params = {}) </a>
    

    
  </span>
  
  
  
  <span class="abstract note title">Abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new layout with the given content, attributes and identifier.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#down-instance_method" title="#down (instance method)">- (void) <strong>down</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Brings down the connection to the data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DataSource) <strong>initialize</strong>(site, items_root, layouts_root, config) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new data source for the given site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#items-instance_method" title="#items (instance method)">- (Array&lt;Nanoc3::Item&gt;) <strong>items</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of items (represented by <span class='object_link'><a href="Item.html" title="Nanoc3::Item (class)">Item</a></span>) in this site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#layouts-instance_method" title="#layouts (instance method)">- (Array&lt;Nanoc3::Layout&gt;) <strong>layouts</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of layouts (represented by <span class='object_link'><a href="Layout.html" title="Nanoc3::Layout (class)">Layout</a></span>) in this
site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#loading-instance_method" title="#loading (instance method)">- (void) <strong>loading</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Loads the data source when necessary (calling <span class='object_link'><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></span>), yields, and
unloads (using <span class='object_link'><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></span>) the data source when it is not being used
elsewhere.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup-instance_method" title="#setup (instance method)">- (void) <strong>setup</strong> </a>
    

    
  </span>
  
  
  
  <span class="abstract note title">Abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates the bare minimum essentials for this data source to work.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unuse-instance_method" title="#unuse (instance method)">- (void) <strong>unuse</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Marks the data source as unused by the caller.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#up-instance_method" title="#up (instance method)">- (void) <strong>up</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Brings up the connection to the data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">- (void) <strong>update</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updated the content stored in this site to a newer version.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#use-instance_method" title="#use (instance method)">- (void) <strong>use</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Marks the data source as used by the caller.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="PluginRegistry/PluginMethods.html" title="Nanoc3::PluginRegistry::PluginMethods (module)">PluginRegistry::PluginMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="PluginRegistry/PluginMethods.html#identifier-instance_method" title="Nanoc3::PluginRegistry::PluginMethods#identifier (method)">identifier</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#identifiers-instance_method" title="Nanoc3::PluginRegistry::PluginMethods#identifiers (method)">identifiers</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#named-instance_method" title="Nanoc3::PluginRegistry::PluginMethods#named (method)">named</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#register-instance_method" title="Nanoc3::PluginRegistry::PluginMethods#register (method)">register</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Nanoc3::DataSource (class)">DataSource</a></span></tt>) <strong>initialize</strong>(site, items_root, layouts_root, config) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates a new data source for the given site.</p>

<p>returned by the #items method (comparable to mount points for
filesystems in Unix-ish OSes).</p>

<p>layouts returned by the #layouts method (comparable to mount points
for filesystems in Unix-ish OSes).</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>site</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Site.html" title="Nanoc3::Site (class)">Nanoc3::Site</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The site this data source belongs to.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>items_root</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The prefix that should be given to all items</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>layouts_root</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The prefix that should be given to all</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>config</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The configuration for this data source.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_site'>site</span><span class='comma'>,</span> <span class='id identifier rubyid_items_root'>items_root</span><span class='comma'>,</span> <span class='id identifier rubyid_layouts_root'>layouts_root</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='ivar'>@site</span>         <span class='op'>=</span> <span class='id identifier rubyid_site'>site</span>
  <span class='ivar'>@items_root</span>   <span class='op'>=</span> <span class='id identifier rubyid_items_root'>items_root</span>
  <span class='ivar'>@layouts_root</span> <span class='op'>=</span> <span class='id identifier rubyid_layouts_root'>layouts_root</span>
  <span class='ivar'>@config</span>       <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>

  <span class='ivar'>@references</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="config-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="config-instance_method">
  
    - (<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>) <strong>config</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>online data sources could contain authentication details.</p>


  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The configuration for this data source. For example,</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 39</span>

<span class='kw'>def</span> <span class='id identifier rubyid_config'>config</span>
  <span class='ivar'>@config</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="items_root-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="items_root-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>items_root</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>should be mounted.</p>


  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The root path where items returned by this data source</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_items_root'>items_root</span>
  <span class='ivar'>@items_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="layouts_root-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="layouts_root-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>layouts_root</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>source should be mounted.</p>


  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The root path where layouts returned by this data</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_layouts_root'>layouts_root</span>
  <span class='ivar'>@layouts_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="create_item-instance_method">
  
    - (<tt>void</tt>) <strong>create_item</strong>(content, attributes, identifier, params = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong> 
  <div class='inline'></div>
</div>
<p class="note returns_void">This method returns an undefined value.</p><p>Creates a new item with the given content, attributes and identifier. No
instance of <span class='object_link'><a href="Item.html" title="Nanoc3::Item (class)">Item</a></span> will be created; this method creates the item
in the data source so that it can be loaded and turned into a
<span class='object_link'><a href="Item.html" title="Nanoc3::Item (class)">Item</a></span> instance by the <span class='object_link'><a href="#items-instance_method" title="Nanoc3::DataSource#items (method)">#items</a></span> method.</p>

<p>can be used to influence the way items are stored. For example,
filesystem data sources could use this to pass the extension of the
files that should be generated.</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>content</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>identifier</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Extra parameters to give to the data source. This</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 197</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_item'>create_item</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_identifier'>identifier</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_not_implemented'>not_implemented</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>create_item</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create_layout-instance_method">
  
    - (<tt>void</tt>) <strong>create_layout</strong>(content, attributes, identifier, params = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong> 
  <div class='inline'></div>
</div>
<p class="note returns_void">This method returns an undefined value.</p><p>Creates a new layout with the given content, attributes and identifier.
No instance of <span class='object_link'><a href="Layout.html" title="Nanoc3::Layout (class)">Layout</a></span> will be created; this method creates the
layout in the data source so that it can be loaded and turned into a
<span class='object_link'><a href="Layout.html" title="Nanoc3::Layout (class)">Layout</a></span> instance by the <span class='object_link'><a href="#layouts-instance_method" title="Nanoc3::DataSource#layouts (method)">#layouts</a></span> method.</p>

<p>can be used to influence the way items are stored. For example,
filesystem data sources could use this to pass the extension of the
files that should be generated.</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>content</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>identifier</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Extra parameters to give to the data source. This</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 220</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_layout'>create_layout</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_identifier'>identifier</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_not_implemented'>not_implemented</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>create_layout</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="down-instance_method">
  
    - (<tt>void</tt>) <strong>down</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Brings down the connection to the data. This method should undo the
effects of the <span class='object_link'><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></span> method. For example, a database connection
established in <span class='object_link'><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></span> should be closed in this method.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 123</span>

<span class='kw'>def</span> <span class='id identifier rubyid_down'>down</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="items-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc3::Item (class)">Nanoc3::Item</a></span>&gt;</tt>) <strong>items</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns the list of items (represented by <span class='object_link'><a href="Item.html" title="Nanoc3::Item (class)">Item</a></span>) in this site.
The default implementation simply returns an empty array.</p>

<p>Subclasses should not prepend <code>items_root</code> to the item&#39;s identifiers, as
this will be done automatically.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc3::Item (class)">Nanoc3::Item</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of items</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_items'>items</span>
  <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="layouts-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Layout.html" title="Nanoc3::Layout (class)">Nanoc3::Layout</a></span>&gt;</tt>) <strong>layouts</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns the list of layouts (represented by <span class='object_link'><a href="Layout.html" title="Nanoc3::Layout (class)">Layout</a></span>) in this
site. The default implementation simply returns an empty array.</p>

<p>Subclasses should prepend <code>layout_root</code> to the layout&#39;s identifiers,
since this is not done automatically.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Layout.html" title="Nanoc3::Layout (class)">Nanoc3::Layout</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of layouts</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 174</span>

<span class='kw'>def</span> <span class='id identifier rubyid_layouts'>layouts</span>
  <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="loading-instance_method">
  
    - (<tt>void</tt>) <strong>loading</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Loads the data source when necessary (calling <span class='object_link'><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></span>), yields, and
unloads (using <span class='object_link'><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></span>) the data source when it is not being used
elsewhere. All data source queries and data manipulations should be
wrapped in a <span class='object_link'><a href="#loading-instance_method" title="Nanoc3::DataSource#loading (method)">#loading</a></span> block; it ensures that the data source is loaded
when necessary and makes sure the data source does not get unloaded
while it is still being used elsewhere.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 73</span>

<span class='kw'>def</span> <span class='id identifier rubyid_loading'>loading</span>
  <span class='id identifier rubyid_use'>use</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_unuse'>unuse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="setup-instance_method">
  
    - (<tt>void</tt>) <strong>setup</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong> 
  <div class='inline'></div>
</div>
<p class="note returns_void">This method returns an undefined value.</p><p>Creates the bare minimum essentials for this data source to work. This
action will likely be destructive. This method should not create sample
data such as a default home page, a default layout, etc. For example,
when using a database, this is where you should create the necessary
tables for the data source to function properly.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup'>setup</span>
  <span class='id identifier rubyid_not_implemented'>not_implemented</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>setup</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unuse-instance_method">
  
    - (<tt>void</tt>) <strong>unuse</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Marks the data source as unused by the caller.</p>

<p>Calling this method decreases the internal reference count. When the
reference count reaches zero, i.e. when the data source is not used any
more, the data source will be unloaded (<span class='object_link'><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></span> will be called).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 99</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unuse'>unuse</span>
  <span class='ivar'>@references</span> <span class='op'>-=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_down'>down</span> <span class='kw'>if</span> <span class='ivar'>@references</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="up-instance_method">
  
    - (<tt>void</tt>) <strong>up</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Brings up the connection to the data. Depending on the way data is
stored, this may not be necessary. This is the ideal place to connect to
the database, for example.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_up'>up</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update-instance_method">
  
    - (<tt>void</tt>) <strong>update</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Updated the content stored in this site to a newer version. A newer
version of a data source may store content in a different format, and
this method will update the stored content to this newer format.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 147</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="use-instance_method">
  
    - (<tt>void</tt>) <strong>use</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Marks the data source as used by the caller.</p>

<p>Calling this method increases the internal reference count. When the
data source is used for the first time (first <span class='object_link'><a href="#use-instance_method" title="Nanoc3::DataSource#use (method)">#use</a></span> call), the data
source will be loaded (<span class='object_link'><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></span> will be called).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 87</span>

<span class='kw'>def</span> <span class='id identifier rubyid_use'>use</span>
  <span class='id identifier rubyid_up'>up</span> <span class='kw'>if</span> <span class='ivar'>@references</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='ivar'>@references</span> <span class='op'>+=</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-15639968-1");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>
