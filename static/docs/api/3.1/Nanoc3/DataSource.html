<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Nanoc3::DataSource</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo; 
    <span class='title'><a href="../Nanoc3.html" title="Nanoc3 (module)">Nanoc3</a></span>
     &raquo; 
    <span class="title">DataSource</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Nanoc3::DataSource 
  <span class="abstract note title">Abstract</span>
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Nanoc3::DataSource</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extends:</dt>
      <dd class="r2"><a href="PluginRegistry/PluginMethods.html" title="Nanoc3::PluginRegistry::PluginMethods (module)">PluginRegistry::PluginMethods</a></dd>
      
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/nanoc3/base/data_source.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note abstract">
  <strong>This class is abstract.</strong> 
  <div class='inline'><p>Subclasses should at least implement <tt><a href="#items-instance_method" title="Nanoc3::DataSource#items (method)">#items</a></tt> and <tt><a href="#layouts-instance_method" title="Nanoc3::DataSource#layouts (method)">#layouts</a></tt>. If
the data source should support creating items and layouts using the
<code>create_item</code> and <code>create_layout</code> CLI commands, the <tt><a href="#setup-instance_method" title="Nanoc3::DataSource#setup (method)">#setup</a></tt>,
<tt><a href="#create_item-instance_method" title="Nanoc3::DataSource#create_item (method)">#create_item</a></tt> and <tt><a href="#create_layout-instance_method" title="Nanoc3::DataSource#create_layout (method)">#create_layout</a></tt> methods should be implemented as well.</p></div>
</p>
<p>Responsible for loading site data. It is the (abstract) superclass for all
data sources. Subclasses must at least implement the data reading methods
(<tt><a href="#items-instance_method" title="Nanoc3::DataSource#items (method)">#items</a></tt> and <tt><a href="#layouts-instance_method" title="Nanoc3::DataSource#layouts (method)">#layouts</a></tt>); all other methods involving data manipulation
are optional.</p>

<p>Apart from the methods for loading and storing data, there are the <tt><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></tt>
and <tt><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></tt> methods for bringing up and tearing down the connection to the
data source. These should be overridden in subclasses. The <tt><a href="#loading-instance_method" title="Nanoc3::DataSource#loading (method)">#loading</a></tt>
method wraps <tt><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></tt> and <tt><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></tt>. <tt><a href="#loading-instance_method" title="Nanoc3::DataSource#loading (method)">#loading</a></tt> is a convenience method for the
more low-level methods <tt><a href="#use-instance_method" title="Nanoc3::DataSource#use (method)">#use</a></tt> and <tt><a href="#unuse-instance_method" title="Nanoc3::DataSource#unuse (method)">#unuse</a></tt>, which respectively increment
and decrement the reference count; when the reference count goes from 0 to
1, the data source will be loaded (<tt><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></tt> will be called) and when the
reference count goes from 1 to 0, the data source will be unloaded
(<tt><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></tt> will be called).</p>

<p>The <tt><a href="#setup-instance_method" title="Nanoc3::DataSource#setup (method)">#setup</a></tt> method is used for setting up a site's data source for the
first time.</p>

  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><a href="DataSources/Delicious.html" title="Nanoc3::DataSources::Delicious (class)">DataSources::Delicious</a>, <a href="DataSources/FilesystemUnified.html" title="Nanoc3::DataSources::FilesystemUnified (class)">DataSources::FilesystemUnified</a>, <a href="DataSources/FilesystemVerbose.html" title="Nanoc3::DataSources::FilesystemVerbose (class)">DataSources::FilesystemVerbose</a>, <a href="DataSources/LastFM.html" title="Nanoc3::DataSources::LastFM (class)">DataSources::LastFM</a>, <a href="DataSources/Twitter.html" title="Nanoc3::DataSources::Twitter (class)">DataSources::Twitter</a></p>
</div>


  
  
  
  
  <h2>Instance Attribute Summary</h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">- (Hash) <strong>config</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The configuration for this data source.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#items_root-instance_method" title="#items_root (instance method)">- (String) <strong>items_root</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The root path where items returned by this data source
should be mounted.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#layouts_root-instance_method" title="#layouts_root (instance method)">- (String) <strong>layouts_root</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The root path where layouts returned by this data
source should be mounted.</p></div></span>
  
</li>

    
  </ul>


  
    <h2>Instance Method Summary</h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_item-instance_method" title="#create_item (instance method)">- (void) <strong>create_item</strong>(content, attributes, identifier, params = {}) </a>
    

    
  </span>
  
  
  
  <span class="abstract note title">Abstract</span>
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new item with the given content, attributes and identifier.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_layout-instance_method" title="#create_layout (instance method)">- (void) <strong>create_layout</strong>(content, attributes, identifier, params = {}) </a>
    

    
  </span>
  
  
  
  <span class="abstract note title">Abstract</span>
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new layout with the given content, attributes and identifier.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#down-instance_method" title="#down (instance method)">- (void) <strong>down</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Brings down the connection to the data.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DataSource) <strong>initialize</strong>(site, items_root, layouts_root, config) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new data source for the given site.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#items-instance_method" title="#items (instance method)">- (Array&lt;Nanoc3::Item&gt;) <strong>items</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of items (represented by <tt><a href="Item.html" title="Nanoc3::Item (class)">Nanoc3::Item</a></tt>) in this site.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#layouts-instance_method" title="#layouts (instance method)">- (Array&lt;Nanoc3::Layout&gt;) <strong>layouts</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of layouts (represented by <tt><a href="Layout.html" title="Nanoc3::Layout (class)">Nanoc3::Layout</a></tt>) in this
site.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#loading-instance_method" title="#loading (instance method)">- (void) <strong>loading</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Loads the data source when necessary (calling <tt><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></tt>), yields, and
unloads (using <tt><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></tt>) the data source when it is not being used
elsewhere.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup-instance_method" title="#setup (instance method)">- (void) <strong>setup</strong> </a>
    

    
  </span>
  
  
  
  <span class="abstract note title">Abstract</span>
  

  
    <span class="summary_desc"><div class='inline'><p>Creates the bare minimum essentials for this data source to work.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unuse-instance_method" title="#unuse (instance method)">- (void) <strong>unuse</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Marks the data source as unused by the caller.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#up-instance_method" title="#up (instance method)">- (void) <strong>up</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Brings up the connection to the data.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">- (void) <strong>update</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updated the content stored in this site to a newer version.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#use-instance_method" title="#use (instance method)">- (void) <strong>use</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Marks the data source as used by the caller.</p></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="PluginRegistry/PluginMethods.html" title="Nanoc3::PluginRegistry::PluginMethods (module)">PluginRegistry::PluginMethods</a></h3>
  <p class="inherited"><a href="PluginRegistry/PluginMethods.html#identifier-instance_method" title="Nanoc3::PluginRegistry::PluginMethods#identifier (method)">identifier</a>, <a href="PluginRegistry/PluginMethods.html#identifiers-instance_method" title="Nanoc3::PluginRegistry::PluginMethods#identifiers (method)">identifiers</a>, <a href="PluginRegistry/PluginMethods.html#named-instance_method" title="Nanoc3::PluginRegistry::PluginMethods#named (method)">named</a>, <a href="PluginRegistry/PluginMethods.html#register-instance_method" title="Nanoc3::PluginRegistry::PluginMethods#register (method)">register</a></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><a href="" title="Nanoc3::DataSource (class)">DataSource</a></tt>) <strong>initialize</strong>(site, items_root, layouts_root, config) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates a new data source for the given site.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><a href="Site.html" title="Nanoc3::Site (class)">Nanoc3::Site</a></tt>)</span>
      
      
        <span class='name'>site</span>
      
      
      
        &mdash;
        <div class='inline'><p>The site this data source belongs to.</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><a href="../String.html" title="String (class)">String</a></tt>)</span>
      
      
        <span class='name'>items_root</span>
      
      
      
        &mdash;
        <div class='inline'><p>The prefix that should be given to all items
returned by the #items method (comparable to mount points for
filesystems in Unix-ish OSes).</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><a href="../String.html" title="String (class)">String</a></tt>)</span>
      
      
        <span class='name'>layouts_root</span>
      
      
      
        &mdash;
        <div class='inline'><p>The prefix that should be given to all
layouts returned by the #layouts method (comparable to mount points
for filesystems in Unix-ish OSes).</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><a href="../Hash.html" title="Hash (class)">Hash</a></tt>)</span>
      
      
        <span class='name'>config</span>
      
      
      
        &mdash;
        <div class='inline'><p>The configuration for this data source.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 56</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id site'>site</span><span class='comma'>,</span> <span class='id items_root'>items_root</span><span class='comma'>,</span> <span class='id layouts_root'>layouts_root</span><span class='comma'>,</span> <span class='id config'>config</span><span class='rparen'>)</span>
  <span class='ivar'>@site</span>         <span class='op'>=</span> <span class='id site'>site</span>
  <span class='ivar'>@items_root</span>   <span class='op'>=</span> <span class='id items_root'>items_root</span>
  <span class='ivar'>@layouts_root</span> <span class='op'>=</span> <span class='id layouts_root'>layouts_root</span>
  <span class='ivar'>@config</span>       <span class='op'>=</span> <span class='id config'>config</span>

  <span class='ivar'>@references</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="config-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="config-instance_method">
  
    - (<tt><a href="../Hash.html" title="Hash (class)">Hash</a></tt>) <strong>config</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The configuration for this data source. For example,
online data sources could contain authentication details.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><a href="../Hash.html" title="Hash (class)">Hash</a></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>The configuration for this data source. For example,
online data sources could contain authentication details.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 39</span>

<span class='kw'>def</span> <span class='id config'>config</span>
  <span class='ivar'>@config</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="items_root-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="items_root-instance_method">
  
    - (<tt><a href="../String.html" title="String (class)">String</a></tt>) <strong>items_root</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The root path where items returned by this data source
should be mounted.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><a href="../String.html" title="String (class)">String</a></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>The root path where items returned by this data source
should be mounted.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 31</span>

<span class='kw'>def</span> <span class='id items_root'>items_root</span>
  <span class='ivar'>@items_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="layouts_root-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="layouts_root-instance_method">
  
    - (<tt><a href="../String.html" title="String (class)">String</a></tt>) <strong>layouts_root</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The root path where layouts returned by this data
source should be mounted.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><a href="../String.html" title="String (class)">String</a></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>The root path where layouts returned by this data
source should be mounted.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 35</span>

<span class='kw'>def</span> <span class='id layouts_root'>layouts_root</span>
  <span class='ivar'>@layouts_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="create_item-instance_method">
  
    - (<tt>void</tt>) <strong>create_item</strong>(content, attributes, identifier, params = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note abstract">
  <strong>This method is abstract.</strong> 
  <div class='inline'></div>
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Creates a new item with the given content, attributes and identifier. No
instance of <tt><a href="Item.html" title="Nanoc3::Item (class)">Nanoc3::Item</a></tt> will be created; this method creates the item
in the data source so that it can be loaded and turned into a
<tt><a href="Item.html" title="Nanoc3::Item (class)">Nanoc3::Item</a></tt> instance by the <tt><a href="#items-instance_method" title="Nanoc3::DataSource#items (method)">#items</a></tt> method.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><a href="../String.html" title="String (class)">String</a></tt>)</span>
      
      
        <span class='name'>content</span>
      
      
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><a href="../Hash.html" title="Hash (class)">Hash</a></tt>)</span>
      
      
        <span class='name'>attributes</span>
      
      
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><a href="../String.html" title="String (class)">String</a></tt>)</span>
      
      
        <span class='name'>identifier</span>
      
      
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><a href="../Hash.html" title="Hash (class)">Hash</a></tt>)</span>
      
      
        <span class='name'>params</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Extra parameters to give to the data source. This
can be used to influence the way items are stored. For example,
filesystem data sources could use this to pass the extension of the
files that should be generated.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 197</span>

<span class='kw'>def</span> <span class='id create_item'>create_item</span><span class='lparen'>(</span><span class='id content'>content</span><span class='comma'>,</span> <span class='id attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier'>identifier</span><span class='comma'>,</span> <span class='id params'>params</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id not_implemented'>not_implemented</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>create_item</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create_layout-instance_method">
  
    - (<tt>void</tt>) <strong>create_layout</strong>(content, attributes, identifier, params = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note abstract">
  <strong>This method is abstract.</strong> 
  <div class='inline'></div>
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Creates a new layout with the given content, attributes and identifier.
No instance of <tt><a href="Layout.html" title="Nanoc3::Layout (class)">Nanoc3::Layout</a></tt> will be created; this method creates the
layout in the data source so that it can be loaded and turned into a
<tt><a href="Layout.html" title="Nanoc3::Layout (class)">Nanoc3::Layout</a></tt> instance by the <tt><a href="#layouts-instance_method" title="Nanoc3::DataSource#layouts (method)">#layouts</a></tt> method.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><a href="../String.html" title="String (class)">String</a></tt>)</span>
      
      
        <span class='name'>content</span>
      
      
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><a href="../Hash.html" title="Hash (class)">Hash</a></tt>)</span>
      
      
        <span class='name'>attributes</span>
      
      
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><a href="../String.html" title="String (class)">String</a></tt>)</span>
      
      
        <span class='name'>identifier</span>
      
      
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><a href="../Hash.html" title="Hash (class)">Hash</a></tt>)</span>
      
      
        <span class='name'>params</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Extra parameters to give to the data source. This
can be used to influence the way items are stored. For example,
filesystem data sources could use this to pass the extension of the
files that should be generated.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 220</span>

<span class='kw'>def</span> <span class='id create_layout'>create_layout</span><span class='lparen'>(</span><span class='id content'>content</span><span class='comma'>,</span> <span class='id attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier'>identifier</span><span class='comma'>,</span> <span class='id params'>params</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id not_implemented'>not_implemented</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>create_layout</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="down-instance_method">
  
    - (<tt>void</tt>) <strong>down</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Brings down the connection to the data. This method should undo the
effects of the <tt><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></tt> method. For example, a database connection
established in <tt><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></tt> should be closed in this method.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 123</span>

<span class='kw'>def</span> <span class='id down'>down</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="items-instance_method">
  
    - (<tt><a href="../Array.html" title="Array (class)">Array</a>&lt;<a href="Item.html" title="Nanoc3::Item (class)">Nanoc3::Item</a>&gt;</tt>) <strong>items</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns the list of items (represented by <tt><a href="Item.html" title="Nanoc3::Item (class)">Nanoc3::Item</a></tt>) in this site.
The default implementation simply returns an empty array.</p>

<p>Subclasses should not prepend <code>items_root</code> to the item's identifiers, as
this will be done automatically.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><a href="../Array.html" title="Array (class)">Array</a>&lt;<a href="Item.html" title="Nanoc3::Item (class)">Nanoc3::Item</a>&gt;</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>A list of items</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 160</span>

<span class='kw'>def</span> <span class='id items'>items</span>
  <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="layouts-instance_method">
  
    - (<tt><a href="../Array.html" title="Array (class)">Array</a>&lt;<a href="Layout.html" title="Nanoc3::Layout (class)">Nanoc3::Layout</a>&gt;</tt>) <strong>layouts</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns the list of layouts (represented by <tt><a href="Layout.html" title="Nanoc3::Layout (class)">Nanoc3::Layout</a></tt>) in this
site. The default implementation simply returns an empty array.</p>

<p>Subclasses should prepend <code>layout_root</code> to the layout's identifiers,
since this is not done automatically.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><a href="../Array.html" title="Array (class)">Array</a>&lt;<a href="Layout.html" title="Nanoc3::Layout (class)">Nanoc3::Layout</a>&gt;</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>A list of layouts</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 174</span>

<span class='kw'>def</span> <span class='id layouts'>layouts</span>
  <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="loading-instance_method">
  
    - (<tt>void</tt>) <strong>loading</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Loads the data source when necessary (calling <tt><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></tt>), yields, and
unloads (using <tt><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></tt>) the data source when it is not being used
elsewhere. All data source queries and data manipulations should be
wrapped in a <tt><a href="#loading-instance_method" title="Nanoc3::DataSource#loading (method)">#loading</a></tt> block; it ensures that the data source is loaded
when necessary and makes sure the data source does not get unloaded
while it is still being used elsewhere.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 73</span>

<span class='kw'>def</span> <span class='id loading'>loading</span>
  <span class='id use'>use</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='id unuse'>unuse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="setup-instance_method">
  
    - (<tt>void</tt>) <strong>setup</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note abstract">
  <strong>This method is abstract.</strong> 
  <div class='inline'></div>
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Creates the bare minimum essentials for this data source to work. This
action will likely be destructive. This method should not create sample
data such as a default home page, a default layout, etc. For example,
when using a database, this is where you should create the necessary
tables for the data source to function properly.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 135</span>

<span class='kw'>def</span> <span class='id setup'>setup</span>
  <span class='id not_implemented'>not_implemented</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>setup</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unuse-instance_method">
  
    - (<tt>void</tt>) <strong>unuse</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Marks the data source as unused by the caller.</p>

<p>Calling this method decreases the internal reference count. When the
reference count reaches zero, i.e. when the data source is not used any
more, the data source will be unloaded (<tt><a href="#down-instance_method" title="Nanoc3::DataSource#down (method)">#down</a></tt> will be called).</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 99</span>

<span class='kw'>def</span> <span class='id unuse'>unuse</span>
  <span class='ivar'>@references</span> <span class='op'>-=</span> <span class='int'>1</span>
  <span class='id down'>down</span> <span class='kw'>if</span> <span class='ivar'>@references</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="up-instance_method">
  
    - (<tt>void</tt>) <strong>up</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Brings up the connection to the data. Depending on the way data is
stored, this may not be necessary. This is the ideal place to connect to
the database, for example.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 112</span>

<span class='kw'>def</span> <span class='id up'>up</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update-instance_method">
  
    - (<tt>void</tt>) <strong>update</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Updated the content stored in this site to a newer version. A newer
version of a data source may store content in a different format, and
this method will update the stored content to this newer format.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 147</span>

<span class='kw'>def</span> <span class='id update'>update</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="use-instance_method">
  
    - (<tt>void</tt>) <strong>use</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Marks the data source as used by the caller.</p>

<p>Calling this method increases the internal reference count. When the
data source is used for the first time (first <tt><a href="#use-instance_method" title="Nanoc3::DataSource#use (method)">#use</a></tt> call), the data
source will be loaded (<tt><a href="#up-instance_method" title="Nanoc3::DataSource#up (method)">#up</a></tt> will be called).</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/base/data_source.rb', line 87</span>

<span class='kw'>def</span> <span class='id use'>use</span>
  <span class='id up'>up</span> <span class='kw'>if</span> <span class='ivar'>@references</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='ivar'>@references</span> <span class='op'>+=</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sun Mar 28 19:25:41 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.4 (ruby-1.9.1).
</div>

  </body>
</html>