<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: Nanoc3::Helpers::Capturing</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (C)</a> &raquo; 
    <span class='title'><a href="../../Nanoc3.html" title="Nanoc3 (module)">Nanoc3</a></span> &raquo; <span class='title'><a href="../Helpers.html" title="Nanoc3::Helpers (module)">Helpers</a></span>
     &raquo; 
    <span class="title">Capturing</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: Nanoc3::Helpers::Capturing 
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><a href="Filtering.html" title="Nanoc3::Helpers::Filtering (module)">Filtering</a>, <a href="Rendering.html" title="Nanoc3::Helpers::Rendering (module)">Rendering</a></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/nanoc3/helpers/capturing.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Provides functionality for “capturing” content in one place and reusing
this content elsewhere.</p>

<p>For example, suppose you want the sidebar of your site to contain a short
summary of the item. You could put the summary in the meta file, but
that’s not possible when the summary contains eRuby. You could also put
the sidebar inside the actual item, but that’s not very pretty. Instead,
you write the summary on the item itself, but capture it, and print it in
the sidebar layout.</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>Capturing content into a <code>content_for_summary</code> attribute</p></div></h4>
      <pre class="example code">
&lt;% content_for :summary do %&gt;
  &lt;p&gt;On this item, nanoc is introduced, blah blah.&lt;/p&gt;
&lt;% end %&gt;</pre>
    
      <h4><div class='inline'><p>Showing captured content in a sidebar</p></div></h4>
      <pre class="example code">
&lt;div id=&quot;sidebar&quot;&gt;
  &lt;h3&gt;Summary&lt;/h3&gt;
  &lt;%= @item[:content_for_summary] || '(no summary)' %&gt;
&lt;/div&gt;</pre>
    
  </div>

</div>


  
    <h2>Instance Method Summary</h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#capture-instance_method" title="#capture (instance method)">- (String) <strong>capture</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Evaluates the given block and returns the result.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_for-instance_method" title="#content_for (instance method)">- (void) <strong>content_for</strong>(name, &amp;block) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Captures the content inside the block and stores it in an item
attribute named <code>content_for_</code> followed by the given name.</p></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="capture-instance_method">
  
    - (<tt><a href="../../String.html" title="String (class)">String</a></tt>) <strong>capture</strong>(&amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Evaluates the given block and returns the result. The contents of the
block is not outputted.</p>

<p>This function has been tested with ERB and Haml. Other filters may not
work correctly.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><a href="../../String.html" title="String (class)">String</a></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>The captured result</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/helpers/capturing.rb', line 48</span>

<span class='kw'>def</span> <span class='id capture'>capture</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='comment'># Get erbout so far
</span>  <span class='id erbout'>erbout</span> <span class='op'>=</span> <span class='id eval'>eval</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id block'>block</span><span class='period'>.</span><span class='id binding'>binding</span><span class='rparen'>)</span>
  <span class='id erbout_length'>erbout_length</span> <span class='op'>=</span> <span class='id erbout'>erbout</span><span class='period'>.</span><span class='id length'>length</span>

  <span class='comment'># Execute block
</span>  <span class='id block'>block</span><span class='period'>.</span><span class='id call'>call</span>

  <span class='comment'># Get new piece of erbout
</span>  <span class='id erbout_addition'>erbout_addition</span> <span class='op'>=</span> <span class='id erbout'>erbout</span><span class='lbracket'>[</span><span class='id erbout_length'>erbout_length</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>

  <span class='comment'># Remove addition
</span>  <span class='id erbout'>erbout</span><span class='lbracket'>[</span><span class='id erbout_length'>erbout_length</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>

  <span class='comment'># Done
</span>  <span class='id erbout_addition'>erbout_addition</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="content_for-instance_method">
  
    - (<tt>void</tt>) <strong>content_for</strong>(name, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Captures the content inside the block and stores it in an item
attribute named <code>content_for_</code> followed by the given name. The
content of the block itself will not be outputted.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Symbol</tt>, <tt><a href="../../String.html" title="String (class)">String</a></tt>)</span>
      
      
        <span class='name'>The</span>
      
      
      
        &mdash;
        <div class='inline'><p>base name of the attribute into which the
content should be stored</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/helpers/capturing.rb', line 37</span>

<span class='kw'>def</span> <span class='id content_for'>content_for</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id eval'>eval</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@item[:content_for_</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_content'>] = capture(&amp;block)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sun Mar 28 19:25:42 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.4 (ruby-1.9.1).
</div>

  </body>
</html>