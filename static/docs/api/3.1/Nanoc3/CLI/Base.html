<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Nanoc3::CLI::Base</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (B)</a> &raquo; 
    <span class='title'><a href="../../Nanoc3.html" title="Nanoc3 (module)">Nanoc3</a></span> &raquo; <span class='title'><a href="../CLI.html" title="Nanoc3::CLI (module)">CLI</a></span>
     &raquo; 
    <span class="title">Base</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Nanoc3::CLI::Base 
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Cri::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Cri::Base</li>
          
            <li class="next">Nanoc3::CLI::Base</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/nanoc3/cli/base.rb</dd>
  
</dl>
<div class="clear"></div>



  

  
    <h2>Class Method Summary</h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shared_base-class_method" title="shared_base (class method)">+ (Object) <strong>shared_base</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>Instance Method Summary</h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#global_option_definitions-instance_method" title="#global_option_definitions (instance method)">- (Object) <strong>global_option_definitions</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of global option definitionss.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#handle_option-instance_method" title="#handle_option (instance method)">- (Object) <strong>handle_option</strong>(option) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Base) <strong>initialize</strong> </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Base.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_error-instance_method" title="#print_error (instance method)">- (Object) <strong>print_error</strong>(error) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Prints the given error to stderr.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_site-instance_method" title="#require_site (instance method)">- (Object) <strong>require_site</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Helper function which can be called when a command is executed that
requires a site, such as the compile command.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#resolution_for-instance_method" title="#resolution_for (instance method)">- (Object) <strong>resolution_for</strong>(error) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a string containing hints for resolving the given error, or nil
if no resolution can be automatically obtained.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (Object) <strong>run</strong>(args) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Inherited from ::Cri::Base.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_vcs-instance_method" title="#set_vcs (instance method)">- (Object) <strong>set_vcs</strong>(vcs_name) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the data source's VCS to the VCS with the given name.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#site-instance_method" title="#site (instance method)">- (Object) <strong>site</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Gets the site (Nanoc3::Site) in the current directory and loads its data.</p></div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><a href="" title="Nanoc3::CLI::Base (class)">Base</a></tt>) <strong>initialize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>A new instance of Base</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/cli/base.rb', line 7</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>nanoc3</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>

  <span class='comment'># Add help command
</span>  <span class='kw'>self</span><span class='period'>.</span><span class='id help_command'>help_command</span> <span class='op'>=</span> <span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Commands</span><span class='op'>::</span><span class='const'>Help</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id add_command'>add_command</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id help_command'>help_command</span><span class='rparen'>)</span>

  <span class='comment'># Add other commands
</span>  <span class='id add_command'>add_command</span><span class='lparen'>(</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Commands</span><span class='op'>::</span><span class='const'>Autocompile</span><span class='period'>.</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='id add_command'>add_command</span><span class='lparen'>(</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Commands</span><span class='op'>::</span><span class='const'>Compile</span><span class='period'>.</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='id add_command'>add_command</span><span class='lparen'>(</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Commands</span><span class='op'>::</span><span class='const'>CreateLayout</span><span class='period'>.</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='id add_command'>add_command</span><span class='lparen'>(</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Commands</span><span class='op'>::</span><span class='const'>CreateItem</span><span class='period'>.</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='id add_command'>add_command</span><span class='lparen'>(</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Commands</span><span class='op'>::</span><span class='const'>CreateSite</span><span class='period'>.</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='id add_command'>add_command</span><span class='lparen'>(</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Commands</span><span class='op'>::</span><span class='const'>Debug</span><span class='period'>.</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='id add_command'>add_command</span><span class='lparen'>(</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Commands</span><span class='op'>::</span><span class='const'>Info</span><span class='period'>.</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='id add_command'>add_command</span><span class='lparen'>(</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Commands</span><span class='op'>::</span><span class='const'>Update</span><span class='period'>.</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='id add_command'>add_command</span><span class='lparen'>(</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Commands</span><span class='op'>::</span><span class='const'>View</span><span class='period'>.</span><span class='id new'>new</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="shared_base-class_method">
  
    + (<tt>Object</tt>) <strong>shared_base</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/cli/base.rb', line 26</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id shared_base'>shared_base</span>
  <span class='ivar'>@shared_base</span> <span class='op'>||=</span> <span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id new'>new</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="global_option_definitions-instance_method">
  
    - (<tt>Object</tt>) <strong>global_option_definitions</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns the list of global option definitionss.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/cli/base.rb', line 174</span>

<span class='kw'>def</span> <span class='id global_option_definitions'>global_option_definitions</span>
  <span class='lbracket'>[</span>
    <span class='lbrace'>{</span>
      <span class='symbol'>:long</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>help</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:short</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>h</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:argument</span> <span class='op'>=&gt;</span> <span class='symbol'>:forbidden</span><span class='comma'>,</span>
      <span class='symbol'>:desc</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>show this help message and quit</span><span class='tstring_end'>'</span></span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span>
      <span class='symbol'>:long</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>no-color</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:short</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>C</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:argument</span> <span class='op'>=&gt;</span> <span class='symbol'>:forbidden</span><span class='comma'>,</span>
      <span class='symbol'>:desc</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>disable color</span><span class='tstring_end'>'</span></span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span>
      <span class='symbol'>:long</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>version</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:short</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>v</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:argument</span> <span class='op'>=&gt;</span> <span class='symbol'>:forbidden</span><span class='comma'>,</span>
      <span class='symbol'>:desc</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>show version information and quit</span><span class='tstring_end'>'</span></span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span>
      <span class='symbol'>:long</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>verbose</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:short</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>V</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:argument</span> <span class='op'>=&gt;</span> <span class='symbol'>:forbidden</span><span class='comma'>,</span>
      <span class='symbol'>:desc</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>make nanoc output more detailed</span><span class='tstring_end'>'</span></span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span>
      <span class='symbol'>:long</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>debug</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:short</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>d</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:argument</span> <span class='op'>=&gt;</span> <span class='symbol'>:forbidden</span><span class='comma'>,</span>
      <span class='symbol'>:desc</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>enable debugging (set $DEBUG to true)</span><span class='tstring_end'>'</span></span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span>
      <span class='symbol'>:long</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>warn</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:short</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>w</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:argument</span> <span class='op'>=&gt;</span> <span class='symbol'>:forbidden</span><span class='comma'>,</span>
      <span class='symbol'>:desc</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>enable warnings</span><span class='tstring_end'>'</span></span>
    <span class='rbrace'>}</span>
  <span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="handle_option-instance_method">
  
    - (<tt>Object</tt>) <strong>handle_option</strong>(option) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/cli/base.rb', line 203</span>

<span class='kw'>def</span> <span class='id handle_option'>handle_option</span><span class='lparen'>(</span><span class='id option'>option</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id option'>option</span>
  <span class='kw'>when</span> <span class='symbol'>:version</span>
    <span class='id gem_info'>gem_info</span> <span class='op'>=</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>Gem</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>with RubyGems </span><span class='embexpr_beg'>#{</span><span class='const'>Gem</span><span class='op'>::</span><span class='const'>VERSION</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>without RubyGems</span><span class='tstring_end'>&quot;</span></span>

    <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nanoc </span><span class='embexpr_beg'>#{</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>VERSION</span><span class='rbrace'>}</span><span class='tstring_content'> (c) 2007-2010 Denis Defreyne.</span><span class='tstring_end'>&quot;</span></span>
    <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby </span><span class='embexpr_beg'>#{</span><span class='const'>RUBY_VERSION</span><span class='rbrace'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='const'>RUBY_RELEASE_DATE</span><span class='rbrace'>}</span><span class='tstring_content'>) running on </span><span class='embexpr_beg'>#{</span><span class='const'>RUBY_PLATFORM</span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id gem_info'>gem_info</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id exit'>exit</span> <span class='int'>0</span>
  <span class='kw'>when</span> <span class='symbol'>:verbose</span>
    <span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Logger</span><span class='period'>.</span><span class='id instance'>instance</span><span class='period'>.</span><span class='id level'>level</span> <span class='op'>=</span> <span class='symbol'>:low</span>
  <span class='kw'>when</span> <span class='symbol'>:debug</span>
    <span class='gvar'>$DEBUG</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>when</span> <span class='symbol'>:warn</span>
    <span class='gvar'>$-w</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>when</span> <span class='symbol'>:no-color</span><span class='tstring_end'>'</span></span>
    <span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Logger</span><span class='period'>.</span><span class='id instance'>instance</span><span class='period'>.</span><span class='id color'>color</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>when</span> <span class='symbol'>:help</span>
    <span class='id show_help'>show_help</span>
    <span class='id exit'>exit</span> <span class='int'>0</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="print_error-instance_method">
  
    - (<tt>Object</tt>) <strong>print_error</strong>(error) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Prints the given error to stderr. Includes message, possible resolution,
compilation stack, backtrace, etc.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/cli/base.rb', line 67</span>

<span class='kw'>def</span> <span class='id print_error'>print_error</span><span class='lparen'>(</span><span class='id error'>error</span><span class='rparen'>)</span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span>

  <span class='comment'># Header
</span>  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>+--- /!\ ERROR /!\ -------------------------------------------+</span><span class='tstring_end'>'</span></span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>| An exception occured while running nanoc. If you think this |</span><span class='tstring_end'>'</span></span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>| is a bug in nanoc, please do report it at                   |</span><span class='tstring_end'>'</span></span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>| &lt;http://projects.stoneship.org/trac/nanoc/newticket&gt; --     |</span><span class='tstring_end'>'</span></span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>| thanks in advance!                                          |</span><span class='tstring_end'>'</span></span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>+-------------------------------------------------------------+</span><span class='tstring_end'>'</span></span>

  <span class='comment'># Exception and resolution (if any)
</span>  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>=== MESSAGE:</span><span class='tstring_end'>'</span></span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id error'>error</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id error'>error</span><span class='period'>.</span><span class='id message'>message</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id resolution'>resolution</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id resolution_for'>resolution_for</span><span class='lparen'>(</span><span class='id error'>error</span><span class='rparen'>)</span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id resolution'>resolution</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id resolution'>resolution</span>

  <span class='comment'># Compilation stack
</span>  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>=== COMPILATION STACK:</span><span class='tstring_end'>'</span></span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id site'>site</span> <span class='op'>&amp;&amp;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id site'>site</span><span class='period'>.</span><span class='id compiler'>compiler</span><span class='period'>.</span><span class='id stack'>stack</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  (empty)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id site'>site</span><span class='period'>.</span><span class='id compiler'>compiler</span><span class='period'>.</span><span class='id stack'>stack</span><span class='period'>.</span><span class='id reverse'>reverse</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id obj'>obj</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id obj'>obj</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>ItemRep</span><span class='rparen'>)</span>
        <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  - [item]   </span><span class='embexpr_beg'>#{</span><span class='id obj'>obj</span><span class='period'>.</span><span class='id item'>item</span><span class='period'>.</span><span class='id identifier'>identifier</span><span class='rbrace'>}</span><span class='tstring_content'> (rep </span><span class='embexpr_beg'>#{</span><span class='id obj'>obj</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>else</span> <span class='comment'># layout
</span>        <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  - [layout] </span><span class='embexpr_beg'>#{</span><span class='id obj'>obj</span><span class='period'>.</span><span class='id identifier'>identifier</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Backtrace
</span>  <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>enumerator</span><span class='tstring_end'>'</span></span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>=== BACKTRACE:</span><span class='tstring_end'>'</span></span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='id error'>error</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='period'>.</span><span class='id to_enum'>to_enum</span><span class='lparen'>(</span><span class='symbol'>:each_with_index</span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id item'>item</span><span class='comma'>,</span> <span class='id index'>index</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='id index'>index</span><span class='rbrace'>}</span><span class='tstring_content'>. </span><span class='embexpr_beg'>#{</span><span class='id item'>item</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="require_site-instance_method">
  
    - (<tt>Object</tt>) <strong>require_site</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Helper function which can be called when a command is executed that
requires a site, such as the compile command.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34
35
36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/cli/base.rb', line 32</span>

<span class='kw'>def</span> <span class='id require_site'>require_site</span>
  <span class='kw'>if</span> <span class='id site'>site</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The current working directory does not seem to be a </span><span class='tstring_end'>'</span></span> <span class='op'>+</span>
                 <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>valid/complete nanoc site directory; aborting.</span><span class='tstring_end'>'</span></span>
    <span class='id exit'>exit</span> <span class='int'>1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="resolution_for-instance_method">
  
    - (<tt>Object</tt>) <strong>resolution_for</strong>(error) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns a string containing hints for resolving the given error, or nil
if no resolution can be automatically obtained.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/cli/base.rb', line 112</span>

<span class='kw'>def</span> <span class='id resolution_for'>resolution_for</span><span class='lparen'>(</span><span class='id error'>error</span><span class='rparen'>)</span>
  <span class='comment'># FIXME this should probably go somewhere else so that 3rd-party code can add other gem names too
</span>  <span class='id gem_names'>gem_names</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>adsf</span><span class='tstring_end'>'</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>adsf</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bluecloth</span><span class='tstring_end'>'</span></span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bluecloth</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>builder</span><span class='tstring_end'>'</span></span>        <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>builder</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>coderay</span><span class='tstring_end'>'</span></span>        <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>coderay</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cri</span><span class='tstring_end'>'</span></span>            <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cri</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>erubis</span><span class='tstring_end'>'</span></span>         <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>erubis</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>haml</span><span class='tstring_end'>'</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>haml</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>json</span><span class='tstring_end'>'</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>json</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>less</span><span class='tstring_end'>'</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>less</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>markaby</span><span class='tstring_end'>'</span></span>        <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>markaby</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>maruku</span><span class='tstring_end'>'</span></span>         <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>maruku</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mime/types</span><span class='tstring_end'>'</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mime-types</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rack</span><span class='tstring_end'>'</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rack</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rack/cache</span><span class='tstring_end'>'</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rack-cache</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rainpress</span><span class='tstring_end'>'</span></span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rainpress</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rdiscount</span><span class='tstring_end'>'</span></span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rdiscount</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>redcloth</span><span class='tstring_end'>'</span></span>       <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>redcloth</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rubypants</span><span class='tstring_end'>'</span></span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rubypants</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>sass</span><span class='tstring_end'>'</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>sass</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>w3c_validators</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>w3c_validators</span><span class='tstring_end'>'</span></span>
  <span class='rbrace'>}</span>

  <span class='kw'>case</span> <span class='id error'>error</span>
  <span class='kw'>when</span> <span class='const'>LoadError</span>
    <span class='comment'># Get gem name
</span>    <span class='id lib_name'>lib_name</span> <span class='op'>=</span> <span class='id error'>error</span><span class='period'>.</span><span class='id message'>message</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>no such file to load -- ([^\s]+)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id gem_name'>gem_name</span> <span class='op'>=</span> <span class='id gem_names'>gem_names</span><span class='lbracket'>[</span><span class='backref'>$1</span><span class='rbracket'>]</span>

    <span class='comment'># Build message
</span>    <span class='kw'>if</span> <span class='id gem_name'>gem_name</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Try installing the '</span><span class='embexpr_beg'>#{</span><span class='id gem_name'>gem_name</span><span class='rbrace'>}</span><span class='tstring_content'>' gem (`gem install </span><span class='embexpr_beg'>#{</span><span class='id gem_name'>gem_name</span><span class='rbrace'>}</span><span class='tstring_content'>`) and then re-running the command.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run-instance_method">
  
    - (<tt>Object</tt>) <strong>run</strong>(args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Inherited from ::Cri::Base</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/cli/base.rb', line 56</span>

<span class='kw'>def</span> <span class='id run'>run</span><span class='lparen'>(</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='id args'>args</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>Interrupt</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id exit'>exit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>StandardError</span><span class='comma'>,</span> <span class='const'>ScriptError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id print_error'>print_error</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='id exit'>exit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_vcs-instance_method">
  
    - (<tt>Object</tt>) <strong>set_vcs</strong>(vcs_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Sets the data source's VCS to the VCS with the given name. Does nothing
when the site's data source does not support VCSes (i.e. does not
implement #vcs=).</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/cli/base.rb', line 153</span>

<span class='kw'>def</span> <span class='id set_vcs'>set_vcs</span><span class='lparen'>(</span><span class='id vcs_name'>vcs_name</span><span class='rparen'>)</span>
  <span class='comment'># Skip if not possible
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id vcs_name'>vcs_name</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='op'>||</span> <span class='id site'>site</span><span class='period'>.</span><span class='id nil?'>nil?</span>

  <span class='comment'># Find VCS
</span>  <span class='id vcs_class'>vcs_class</span> <span class='op'>=</span> <span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>Extra</span><span class='op'>::</span><span class='const'>VCS</span><span class='period'>.</span><span class='id named'>named</span><span class='lparen'>(</span><span class='id vcs_name'>vcs_name</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id vcs_class'>vcs_class</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A VCS named </span><span class='embexpr_beg'>#{</span><span class='id vcs_name'>vcs_name</span><span class='rbrace'>}</span><span class='tstring_content'> was not found; aborting.</span><span class='tstring_end'>&quot;</span></span>
    <span class='id exit'>exit</span> <span class='int'>1</span>
  <span class='kw'>end</span>

  <span class='id site'>site</span><span class='period'>.</span><span class='id data_sources'>data_sources</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id data_source'>data_source</span><span class='op'>|</span>
    <span class='comment'># Skip if not possible
</span>    <span class='kw'>next</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id data_source'>data_source</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:vcs=</span><span class='rparen'>)</span>

    <span class='comment'># Set VCS
</span>    <span class='id data_source'>data_source</span><span class='period'>.</span><span class='id vcs'>vcs</span> <span class='op'>=</span> <span class='id vcs_class'>vcs_class</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="site-instance_method">
  
    - (<tt>Object</tt>) <strong>site</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Gets the site (Nanoc3::Site) in the current directory and loads its data.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43
44
45
46
47
48
49
50
51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc3/cli/base.rb', line 41</span>

<span class='kw'>def</span> <span class='id site'>site</span>
  <span class='comment'># Load site if possible
</span>  <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id file?'>file?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>config.yaml</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id instance_variable_defined?'>instance_variable_defined?</span><span class='lparen'>(</span><span class='symbol'>:@site</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id nil?'>nil?</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
      <span class='ivar'>@site</span> <span class='op'>=</span> <span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>Site</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>.</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>Nanoc3</span><span class='op'>::</span><span class='const'>Errors</span><span class='op'>::</span><span class='const'>UnknownDataSource</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
      <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown data source: </span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id exit'>exit</span> <span class='int'>1</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='ivar'>@site</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sun Mar 28 19:25:39 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.4 (ruby-1.9.1).
</div>

  </body>
</html>